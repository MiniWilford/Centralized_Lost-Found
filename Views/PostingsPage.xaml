<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:Centralized_Lost_Found.ViewModels"
             x:Class="Centralized_Lost_Found.Views.PostingsPage"
             Title="Lost Item Postings">

    <Grid Padding="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackLayout Orientation="Horizontal" HorizontalOptions="FillAndExpand" VerticalOptions="Start">
            <Button Text="☰" FontSize="20" BackgroundColor="Transparent" />
            <Label Text="Main Page – Lost Item Postings" FontSize="16" HorizontalOptions="CenterAndExpand"/>
            <StackLayout Orientation="Horizontal" HorizontalOptions="End">
                <Label Text="Inbox(1)" FontSize="14"/>
                <Image Source="inbox_icon.png" HeightRequest="20" WidthRequest="20" />
                <Label Text="Username" FontSize="14"/>
                <Image Source="profile_icon.png" HeightRequest="30" WidthRequest="30" />
            </StackLayout>
        </StackLayout>

        <!-- Add Item Button -->
        <Button Text="Don't see yours?: Add/+" 
                BackgroundColor="Red" 
                TextColor="White" 
                Grid.Row="1" 
                HorizontalOptions="Center"
                Command="{Binding GoToAddItemPageCommand}" />

        <!-- Filter Dropdown -->
        <Picker Title="Filter Locations Dropdown"
                ItemsSource="{Binding Locations}"
                SelectedItem="{Binding SelectedLocation}"
                Grid.Row="2"
                HorizontalOptions="Center"
                WidthRequest="200" />


        <!-- Refresh Command Wrapped over lost items -->
        <RefreshView IsRefreshing="{Binding IsRefreshing}"
             Command="{Binding RefreshCommand}"
             Grid.Row="3">
            <!-- Lost Item Grid -->
            <CollectionView ItemsSource="{Binding Items}"
                            SelectionMode="Single"
                            SelectedItem="{Binding SelectedItem}"
                            SelectionChangedCommand="{Binding ItemSelectedCommand}"
                            SelectionChangedCommandParameter="{Binding SelectedItem}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical" Span="3" />
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Stroke="Gray" StrokeThickness="1" Padding="10">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="5"/>
                            </Border.StrokeShape>
                            <Image Source="{Binding Picture}" 
                               HeightRequest="100" WidthRequest="150"/>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </RefreshView>
    </Grid>
</ContentPage>

